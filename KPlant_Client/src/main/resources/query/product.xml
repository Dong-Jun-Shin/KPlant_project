<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kplant.client.product.dao.ProductDao">
	<select id="productList" parameterType="product" resultType="product">
		select prd_num , 
		<![CDATA[min(case when instr(i_file, '_2.') >0 then  i_file end) as img_prd]]>
	   from product_image
	   where (prd_num like '%air%')
	     or (prd_num like '%fol%')
	      or (prd_num like '%pot%')
	   group by prd_num
	   order by prd_num
	</select>
	
	<!-- 상품 디테일 -->
	<select id="productDetail" parameterType="product" resultType="product">
		SELECT prd_num, prd_name, prd_price, prd_type, prd_qty
		FROM product
		WHERE prd_num=#{prd_num}
	</select>
	
</mapper>